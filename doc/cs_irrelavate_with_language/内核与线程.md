1 用户态和内核态，也称为用户空间和内核
内核本质上就是一种软件，控制计算机硬件资源，并提供上层应用程序运行环境。
用户态，即上层应用程序的活动空间，应用程序的执行必须依托于内核提供的资源，包括cpu，存储，IO

2 系统调用，库函数，shell
为了是应用可以使用资源，内核必须为上层应用提供访问接口，即：系统调用
系统调用是操作系统最小的功能单位。可以把系统调用比做汉字中的笔画，汉字就代表上层应用。
库函数，可以比做偏旁，由多个系统调用组成的更高级的功能。
shell，是一种特殊的应用程序，向下连接系统调用，向上连接各种应用，充当胶水的角色

用户态的应用程序可以通过这三种方式访问内核态的资源

3 用户态和内核态切换
操作系统要对所有计算机资源的访问操作进行分级，与系统相关的一些关键操作要由高特权的程序来完成，不能随便一个用户的程序就可以去直接操作内存等。intel x86架构提供了四个等级，linux采用了两个等级就是用户态和内核态。用户态的进程对资源的访问会受到很大的限制，而内核态的进程可以执行任何操作。
很多程序从用户态开始执行，但某些操作需要更高的权限，这时就需要切换到内核态。一般三种情况下会需要切换到内核态：
-- 系统调用
-- 异常事件
-- 外围设备中断

4 内核线程，轻量级进程，用户线程
内核可以看作一个服务进程，说白点就是运行着的程序，内核线程就是内核的分身，一个分身可以处理一件特定事情。内核线程的调度由内核负责，一个内核线程处于阻塞状态时不影响其他的内核线程，因为其是调度的基本单位。内核线程是直接由内核本身启动的进程。内核线程实际上是将内核函数委托给独立的进程，它与内核中的其他进程”并行”执行。内核线程经常被称之为内核守护进程。

轻量级进程(LWP)是建立在内核之上并由内核支持的用户线程，它是内核线程的高度抽象，每一个轻量级进程都与一个特定的内核线程关联。引入线程的好处是：将一个Progess（进程）的资源分配和执行调度分开，各个线程可以共享资源（内存，文件IO）又可以独立调度执行。

用户线程是完全建立在用户空间的线程库，用户线程的创建、调度、同步和销毁全又库函数在用户空间完成，不需要内核的帮助。因此这种线程是极其低消耗和高效的。

5 多线程的实现
有了操作系统和硬件的支持，我们在程序中的多线程实现方式有这么几种：
内核线程实现：直接由操作系统内核支持的线程，这种线程由内核来完成线程切换。1:1模型
用户线程实现：用户线程指不需要内核支持而在用户程序中实现的线程，其不依赖于操作系统核心，应用进程利用线程库提供创建、同步、调度和管理线程的函数来控制用户线程。多核处理器很难讲线程映射到其他处理器上，单线程阻塞会造成该进程阻塞。
用户线程加轻量级进程混合实现：

java在jdk 1.2之前基于用户线程实现，在1.2之后，基于操作系统的原生线程模型来实现，在每个平台上都不尽相同，比如在windows和linux下都是采用一对一的线程模型实现，在Solaris平台，采用都是一对一或者多对多来实现（solaris 同时支持一对一和多对多）。
